
// üî∑ Professional React + Tailwind Test Platform ‚Äî Project Scaffold
// This canvas contains a ready-to-run project structure for a Test Platform similar to testonline.az
// Frontend: React + Vite + Tailwind
// Backend: Node.js + Express + SQLite (simple, self-contained)

/*
=================================================================================
PROJECT FILES (copy each into your project folder preserving paths)
Run instructions are at the end.
=================================================================================

1) package.json

{
  "name": "meshur-test-pro",
  "version": "1.0.0",
  "private": true,
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "server": "node server/index.js",
    "start:all": "concurrently \"npm:server\" \"npm:dev\""
  },
  "dependencies": {
    "axios": "^1.4.0",
    "bcrypt": "^5.1.0",
    "express": "^4.18.2",
    "jsonwebtoken": "^9.0.0",
    "sqlite3": "^5.1.6"
  },
  "devDependencies": {
    "concurrently": "^8.2.0",
    "vite": "^5.2.0",
    "react": "^18.3.1",
    "react-dom": "^18.3.1",
    "tailwindcss": "^3.5.0",
    "postcss": "^8.4.0",
    "autoprefixer": "^10.4.0"
  }
}


2) vite.config.js

import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  server: { port: 3000 }
})


3) tailwind.config.cjs

module.exports = {
  content: ['./index.html', './src/**/*.{js,jsx}'],
  theme: { extend: {} },
  plugins: []
}


4) postcss.config.cjs

module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {}
  }
}


5) public/index.html

<!doctype html>
<html lang="az">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>M…ô≈ühur Test Pro</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>


6) src/main.jsx

import React from 'react'
import { createRoot } from 'react-dom/client'
import App from './App'
import './styles.css'

createRoot(document.getElementById('root')).render(<App />)


7) src/styles.css

@tailwind base;
@tailwind components;
@tailwind utilities;

:root{
  --primary: #0ea5e9; /* sky-500 */
  --accent: #0369a1; /* sky-800 */
}

body{ @apply bg-slate-50 text-slate-800 }

/* small helper */
.card{ @apply bg-white rounded-2xl shadow p-6 }


8) src/App.jsx

import React, { useEffect, useState } from 'react'
import axios from 'axios'

import Home from './components/Home'
import Auth from './components/Auth'
import Topics from './components/Topics'
import TestRunner from './components/TestRunner'
import Profile from './components/Profile'

export default function App(){
  const [user, setUser] = useState(null)
  const [route, setRoute] = useState('home')
  const [topic, setTopic] = useState(null)

  useEffect(()=>{
    const u = localStorage.getItem('meshur_user')
    if(u) setUser(JSON.parse(u))
  },[])

  function onLogin(userObj){
    setUser(userObj)
    localStorage.setItem('meshur_user', JSON.stringify(userObj))
    setRoute('topics')
  }

  function logout(){
    localStorage.removeItem('meshur_user')
    setUser(null)
    setRoute('home')
  }

  return (
    <div className="min-h-screen p-6 bg-gradient-to-b from-sky-50 to-white">
      <div className="max-w-5xl mx-auto">
        <header className="flex items-center justify-between mb-6">
          <h1 className="text-2xl font-bold text-sky-700">M…ô≈ühur Test Pro</h1>
          <nav className="flex items-center gap-3">
            {user ? (
              <>
                <button className="text-sm px-3 py-2 rounded-md" onClick={()=>setRoute('profile')}>{user.name}</button>
                <button className="text-sm px-3 py-2 rounded-md text-red-600" onClick={logout}>√áƒ±xƒ±≈ü</button>
              </>
            ) : (
              <button className="text-sm px-3 py-2 rounded-md bg-sky-600 text-white" onClick={()=>setRoute('auth')}>Qeydiyyat / Daxil ol</button>
            )}
          </nav>
        </header>

        <main>
          {route === 'home' && <Home onStart={()=>setRoute('topics')}/>} 
          {route === 'auth' && <Auth onLogin={onLogin} onBack={()=>setRoute('home')}/>} 
          {route === 'topics' && <Topics onOpen={(t)=>{setTopic(t); setRoute('test')}} />}
          {route === 'test' && <TestRunner topic={topic} onBack={()=>setRoute('topics')}/>} 
          {route === 'profile' && <Profile user={user} onBack={()=>setRoute('topics')}/>} 
        </main>

        <footer className="text-center text-sm text-slate-500 mt-8">¬© 2025 M…ô≈ühur Test Pro</footer>
      </div>
    </div>
  )
}


9) src/components/Home.jsx

import React from 'react'

export default function Home({onStart}){
  return (
    <div className="card">
      <h2 className="text-xl font-semibold mb-2">Xo≈ü g…ôlmisiniz ‚Äî M…ô≈ühur Test Pro</h2>
      <p className="text-sm text-slate-600 mb-4">S√ºr…ôtli testl…ôr, n…ôtic…ô analizi v…ô t…ôklif formu.</p>
      <div className="flex gap-3">
        <button onClick={onStart} className="px-4 py-2 bg-sky-600 text-white rounded-lg">M√∂vzulara bax</button>
      </div>
    </div>
  )
}


10) src/components/Auth.jsx

import React, { useState } from 'react'

export default function Auth({onLogin,onBack}){
  const [name,setName] = useState('')
  const [email,setEmail] = useState('')
  const [password,setPassword] = useState('')

  function submit(e){
    e.preventDefault()
    if(!email||!password) return alert('Email v…ô ≈üifr…ô daxil edin')
    // For prototype, we accept and store locally then call onLogin
    const user = { name: name||'ƒ∞stifad…ô√ßi', email }
    onLogin(user)
  }

  return (
    <div className="card">
      <h3 className="text-lg font-semibold">Qeydiyyat / Daxil ol</h3>
      <form className="mt-3 grid gap-3" onSubmit={submit}>
        <input value={name} onChange={e=>setName(e.target.value)} placeholder="Ad (ist…ôy…ô g√∂r…ô)" />
        <input value={email} onChange={e=>setEmail(e.target.value)} placeholder="E-po√ßt" />
        <input value={password} onChange={e=>setPassword(e.target.value)} placeholder="≈ûifr…ô" type="password" />
        <div className="flex gap-2">
          <button className="px-4 py-2 bg-sky-600 text-white rounded">Ba≈üla</button>
          <button type="button" onClick={onBack} className="px-4 py-2 border rounded">Geri</button>
        </div>
      </form>
    </div>
  )
}


11) src/components/Topics.jsx

import React, { useEffect, useState } from 'react'
import axios from 'axios'

export default function Topics({onOpen}){
  const [topics, setTopics] = useState([])

  useEffect(()=>{
    // Fetch from backend; fallback to sample topics
    axios.get('/api/topics').then(r=>setTopics(r.data)).catch(()=>{
      setTopics([
        { id:'math', title:'Riyaziyyat', count:20 },
        { id:'history', title:'Tarix', count:18 },
        { id:'umumi', title:'√úmumi M…ôlumat', count:22 }
      ])
    })
  },[])

  return (
    <div className="grid md:grid-cols-3 gap-4">
      {topics.map(t=> (
        <div key={t.id} className="card">
          <h4 className="font-semibold">{t.title}</h4>
          <p className="text-sm text-slate-500">{t.count} sual</p>
          <button onClick={()=>onOpen(t.id)} className="mt-3 px-3 py-2 bg-sky-600 text-white rounded">Ke√ß</button>
        </div>
      ))}
    </div>
  )
}


12) src/components/TestRunner.jsx

import React, { useEffect, useState } from 'react'
import axios from 'axios'

export default function TestRunner({topic,onBack}){
  const [questions, setQuestions] = useState([])
  const [index, setIndex] = useState(0)
  const [answers, setAnswers] = useState({})
  const [finished, setFinished] = useState(false)
  const [timeLeft, setTimeLeft] = useState(0)

  useEffect(()=>{
    // load questions
    axios.get('/api/questions?topic='+topic).then(r=>{
      setQuestions(r.data)
      if(r.data[0]) setTimeLeft(r.data[0].timeLimit || 30)
    }).catch(()=>{
      // fallback sample
      const sample = [
        {id:1, q:'2+2 = ?', choices:['2','3','4','5'], correct:2, timeLimit:30},
        {id:2, q:'Az…ôrbaycanƒ±n paytaxtƒ±?', choices:['Bakƒ±','G…ônc…ô','Sumqayƒ±t','≈û…ôki'], correct:0, timeLimit:30}
      ]
      setQuestions(sample); setTimeLeft(sample[0].timeLimit)
    })
  },[topic])

  useEffect(()=>{
    if(finished) return
    if(timeLeft<=0){
      // auto next
      return handleNext()
    }
    const t = setTimeout(()=>setTimeLeft(s=>s-1),1000)
    return ()=>clearTimeout(t)
  },[timeLeft, finished])

  function selectChoice(i){
    setAnswers(a=>({ ...a, [questions[index].id]: i }))
  }

  function handleNext(){
    if(index < questions.length -1){
      setIndex(i=>i+1)
      setTimeLeft(questions[index+1].timeLimit || 30)
    } else {
      setFinished(true)
      // submit results to backend
      axios.post('/api/results',{ topic, answers }).catch(()=>{})
    }
  }

  if(!questions.length) return <div className="card">Y√ºkl…ônir...</div>

  if(finished){
    const correct = questions.reduce((s,q)=> s + ((answers[q.id]===q.correct)?1:0),0)
    return (
      <div className="card text-center">
        <h3 className="text-xl font-semibold">N…ôtic…ô</h3>
        <p className="mt-3 text-lg">{correct} / {questions.length} d√ºzg√ºn</p>
        <div className="mt-3 flex justify-center gap-2">
          <button onClick={onBack} className="px-3 py-2 border rounded">M√∂vzul…ôr…ô qayƒ±t</button>
        </div>
      </div>
    )
  }

  const q = questions[index]

  return (
    <div className="card">
      <div className="flex justify-between items-center mb-3">
        <h4 className="font-semibold">Sual {index+1} / {questions.length}</h4>
        <div className="text-sm text-slate-500">{timeLeft}s</div>
      </div>
      <h3 className="text-lg font-medium">{q.q}</h3>
      <div className="grid gap-2 mt-4">
        {q.choices.map((c,i)=> (
          <button key={i} onClick={()=>selectChoice(i)} className={`p-3 rounded ${answers[q.id]===i? 'ring-2 ring-sky-400': 'border'}`}>{String.fromCharCode(65+i)}. {c}</button>
        ))}
      </div>
      <div className="mt-4 flex justify-between">
        <button onClick={onBack} className="px-3 py-2 border rounded">√áƒ±xƒ±≈ü</button>
        <button onClick={handleNext} className="px-3 py-2 bg-sky-600 text-white rounded">N√∂vb…ôti</button>
      </div>
    </div>
  )
}


13) src/components/Profile.jsx

import React, { useEffect, useState } from 'react'
import axios from 'axios'

export default function Profile({user, onBack}){
  const [results, setResults] = useState([])

  useEffect(()=>{
    axios.get('/api/results?email='+encodeURIComponent(user.email)).then(r=>setResults(r.data)).catch(()=>setResults([]))
  },[])

  return (
    <div className="card">
      <h3 className="font-semibold">Profil ‚Äî {user.name}</h3>
      <p className="text-sm text-slate-500">E-po√ßt: {user.email}</p>

      <div className="mt-4">
        <h4 className="font-semibold">Ke√ßirilmi≈ü testl…ôr</h4>
        {results.length? (
          <ul className="mt-2 space-y-2">
            {results.map((r,i)=> (
              <li key={i} className="p-3 border rounded">{r.topic} ‚Äî {r.score}/{r.total} ‚Äî {new Date(r.created_at).toLocaleString()}</li>
            ))}
          </ul>
        ) : (<p className="text-sm text-slate-500 mt-2">H…ôl…ô n…ôtic…ôniz yoxdur.</p>)}
      </div>

      <div className="mt-4">
        <button onClick={onBack} className="px-3 py-2 border rounded">Geri</button>
      </div>
    </div>
  )
}


14) server/index.js (Node.js + Express + SQLite minimal API)

const express = require('express')
const path = require('path')
const sqlite3 = require('sqlite3').verbose()
const bodyParser = require('body-parser')

const app = express()
app.use(bodyParser.json())

// serve frontend (vite dev will proxy during dev; in production build serve dist)
app.use(express.static(path.join(__dirname, '..', 'dist')))

const dbFile = path.join(__dirname, 'data.db')
const db = new sqlite3.Database(dbFile)

// init tables
db.serialize(()=>{
  db.run(`CREATE TABLE IF NOT EXISTS questions (id INTEGER PRIMARY KEY, topic TEXT, q TEXT, choices TEXT, correct INTEGER, timeLimit INTEGER)`)
  db.run(`CREATE TABLE IF NOT EXISTS results (id INTEGER PRIMARY KEY, email TEXT, topic TEXT, score INTEGER, total INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP)`)
  db.run(`CREATE TABLE IF NOT EXISTS suggestions (id INTEGER PRIMARY KEY, email TEXT, text TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP)`)

  // seed sample questions if empty
  db.get('SELECT COUNT(*) as cnt FROM questions', (err,row)=>{
    if(row && row.cnt===0){
      const sample = [
        {topic:'math', q:'2+2 = ?', choices:JSON.stringify(['2','3','4','5']), correct:2, timeLimit:30},
        {topic:'umumi', q:'Az…ôrbaycanƒ±n paytaxtƒ±?', choices:JSON.stringify(['Bakƒ±','G…ônc…ô','Sumqayƒ±t']), correct:0, timeLimit:30}
      ]
      const stmt = db.prepare('INSERT INTO questions (topic,q,choices,correct,timeLimit) VALUES (?,?,?,?,?)')
      sample.forEach(s=> stmt.run(s.topic,s.q,s.choices,s.correct,s.timeLimit))
      stmt.finalize()
    }
  })
})

// API: topics
app.get('/api/topics',(req,res)=>{
  db.all('SELECT topic, COUNT(*) as cnt FROM questions GROUP BY topic', (err,rows)=>{
    if(err) return res.status(500).json({error:err.message})
    const list = rows.map(r=> ({ id: r.topic, title: r.topic, count: r.cnt }))
    res.json(list)
  })
})

// API: questions
app.get('/api/questions',(req,res)=>{
  const topic = req.query.topic || 'umumi'
  db.all('SELECT id,q,choices,correct,timeLimit FROM questions WHERE topic=?', [topic], (err,rows)=>{
    if(err) return res.status(500).json({error:err.message})
    const parsed = rows.map(r=> ({ id:r.id, q:r.q, choices: JSON.parse(r.choices), correct: r.correct, timeLimit: r.timeLimit }))
    res.json(parsed)
  })
})

// API: results (save)
app.post('/api/results',(req,res)=>{
  const { topic, answers } = req.body
  // compute score simply by fetching questions and checking
  db.all('SELECT id, correct FROM questions WHERE topic=?', [topic], (err, rows)=>{
    if(err) return res.status(500).json({error:err.message})
    let score = 0
    rows.forEach(r=>{
      if(answers && answers[r.id]===r.correct) score++
    })
    const total = rows.length
    const email = req.body.email || 'guest'
    db.run('INSERT INTO results (email,topic,score,total) VALUES (?,?,?,?)', [email,topic,score,total], function(err){
      if(err) return res.status(500).json({error:err.message})
      res.json({ok:true, score, total})
    })
  })
})

// API: get results
app.get('/api/results',(req,res)=>{
  const email = req.query.email || 'guest'
  db.all('SELECT topic,score,total,created_at FROM results WHERE email=? ORDER BY created_at DESC', [email], (err,rows)=>{
    if(err) return res.status(500).json({error:err.message})
    res.json(rows)
  })
})

// API: suggestions
app.post('/api/suggestions',(req,res)=>{
  const { text, email } = req.body
  db.run('INSERT INTO suggestions (email,text) VALUES (?,?)', [email||'', text||''], function(err){
    if(err) return res.status(500).json({error:err.message})
    res.json({ok:true})
  })
})

// serve index.html for any other route (SPA)
app.get('*', (req,res)=>{
  res.sendFile(path.join(__dirname, '..', 'dist', 'index.html'))
})

const port = process.env.PORT || 4000
app.listen(port, ()=> console.log('Server listening on', port))


=================================================================================
HOW TO RUN (development)

1) Create project folder and paste files according to paths above.
2) npm install
3) npx tailwindcss init -p   (or if installed via package.json, already included)
4) npm run server    # starts backend on :4000 (optional)
5) npm run dev       # starts vite frontend on :3000

During development, you may run frontend and backend concurrently (start:all script uses concurrently).

=================================================================================
NOTES & TWEAKS

‚Ä¢ This scaffold is intentionally minimal but production-capable: you can replace SQLite with PostgreSQL, add JWT-based auth, password hashing with bcrypt, email verification, admin panel, and question editor.

‚Ä¢ I can now:
  - Generate full React components for admin question editor.
  - Add charts for user statistics (recharts).
  - Implement real authentication (bcrypt + JWT) and registration flow.
  - Polish UI to match testonline.az exactly (fonts, spacing, micro-animations).

Dey…ôs…ôn hazƒ±rsan ‚Äî indi ist…ôyirs…ôn m…ôn:
A) Bu fayllarƒ± tam olaraq burada birl…ô≈üdirib bir zip ‚Äî y√ºkl…ôm…ôy…ô hazƒ±r fayl verim? (m…ôn fayl yarada bil…ôr…ôm)
B) V…ô ya √∂nc…ô backend-less tam frontend-only versiyasƒ±nƒ± (GitHub Pages) edim?

S…ônc…ô hansƒ± addƒ±mla davam ed…ôk? */

