// ===== GitHub Pages Ã¼Ã§Ã¼n tam React layihÉ™ =====
// Struktur:
// public/index.html
// src/App.jsx (bu fayl)
// src/index.js
// package.json

// AÅŸaÄŸÄ±da App.jsx faylÄ± verilmiÅŸdir. DigÉ™r fayllar aÅŸaÄŸÄ±da izah olunacaq.

import React, { useEffect, useState } from "react";

const TOPICS = {
  "Ãœmumi MÉ™lumat": [
    { id: 1, q: "DÃ¼nya Ã¼zÉ™rindÉ™ É™n Ã§ox É™haliyÉ™ sahib Ã¶lkÉ™ hansÄ±dÄ±r?", choices: ["Hindistan", "Ã‡in", "ABÅ", "Rusiya"], answer: 1 },
    { id: 2, q: "DÃ¼nyanÄ±n É™n bÃ¶yÃ¼k okeanÄ± hansÄ±dÄ±r?", choices: ["Atlantik", "Hind", "Sakit", "Arktik"], answer: 2 },
  ],
  Riyaziyyat: [
    { id: 3, q: "2^5 = ?", choices: ["16", "32", "64", "8"], answer: 1 },
    { id: 4, q: "(3x + 2) = 11, x=?", choices: ["2", "3", "5", "1"], answer: 1 },
  ],
  Tarix: [
    { id: 5, q: "AzÉ™rbaycan Xalq CÃ¼mhuriyyÉ™ti hansÄ± il elan edildi?", choices: ["1918", "1991", "1920", "1905"], answer: 0 },
    { id: 6, q: "Ä°kinci DÃ¼nya MÃ¼haribÉ™si nÉ™ vaxt bitdi?", choices: ["1944", "1945", "1946", "1950"], answer: 1 },
  ],
};

function useLocalStorage(key, initial) {
  const [val, setVal] = useState(() => {
    const stored = localStorage.getItem(key);
    return stored ? JSON.parse(stored) : initial;
  });
  useEffect(() => localStorage.setItem(key, JSON.stringify(val)), [key, val]);
  return [val, setVal];
}

function AuthModal({ onLogin }) {
  const [mode, setMode] = useState("register");
  const [name, setName] = useState("");
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");

  function submit(e) {
    e.preventDefault();
    if (!email || !password) return alert("BÃ¼tÃ¼n xanalarÄ± doldur!");
    if (mode === "register" && !name) return alert("Ad daxil et!");
    onLogin({ name, email });
  }

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/60">
      <div className="bg-white p-6 rounded-2xl shadow-xl w-full max-w-md">
        <h3 className="text-xl font-bold mb-4 text-center">
          {mode === "register" ? "Qeydiyyat" : "Daxil ol"}
        </h3>
        <form onSubmit={submit} className="grid gap-3">
          {mode === "register" && (
            <input className="border rounded-lg p-2" placeholder="Ad" value={name} onChange={(e) => setName(e.target.value)} />
          )}
          <input type="email" className="border rounded-lg p-2" placeholder="E-poÃ§t" value={email} onChange={(e) => setEmail(e.target.value)} />
          <input type="password" className="border rounded-lg p-2" placeholder="ÅifrÉ™" value={password} onChange={(e) => setPassword(e.target.value)} />
          <button className="bg-blue-600 text-white py-2 rounded-lg">
            {mode === "register" ? "Qeydiyyat" : "Daxil ol"}
          </button>
        </form>
        <p className="text-center text-sm mt-3">
          {mode === "register" ? (
            <>ArtÄ±q hesabÄ±n var? <button onClick={() => setMode("login")} className="text-blue-600">Daxil ol</button></>
          ) : (
            <>HesabÄ±n yoxdur? <button onClick={() => setMode("register")} className="text-blue-600">Qeydiyyat</button></>
          )}
        </p>
      </div>
    </div>
  );
}

function QuestionCard({ q, index, total, selected, onSelect }) {
  return (
    <div className="bg-white p-6 rounded-2xl shadow-md">
      <h4 className="font-semibold text-lg mb-3">{index + 1}. {q.q}</h4>
      <div className="grid gap-2">
        {q.choices.map((c, i) => (
          <button key={i} onClick={() => onSelect(i)} className={`p-3 rounded-lg border text-left ${selected === i ? 'bg-blue-50 border-blue-400' : 'hover:bg-gray-50'}`}>{c}</button>
        ))}
      </div>
      <div className="text-right text-sm text-gray-500 mt-2">Sual {index + 1}/{total}</div>
    </div>
  );
}

function SuggestionForm({ onSubmit }) {
  const [text, setText] = useState("");
  const [email, setEmail] = useState("");

  function send(e) {
    e.preventDefault();
    if (!text) return alert("MÉ™tn daxil et!");
    onSubmit({ text, email });
    setText("");
    setEmail("");
  }

  return (
    <div className="bg-white rounded-2xl shadow-md p-6 mt-8">
      <h3 className="text-xl font-bold mb-2">ğŸ’¡ TÉ™klif vÉ™ Ä°stÉ™k gÃ¶ndÉ™r</h3>
      <form onSubmit={send} className="grid gap-3">
        <textarea className="border rounded-lg p-3" placeholder="TÉ™klif vÉ™ ya istÉ™yini yaz..." value={text} onChange={(e) => setText(e.target.value)} />
        <input className="border rounded-lg p-2" placeholder="Email (istÉ™yÉ™ gÃ¶rÉ™)" value={email} onChange={(e) => setEmail(e.target.value)} />
        <button className="bg-green-600 text-white py-2 rounded-lg">GÃ¶ndÉ™r</button>
      </form>
    </div>
  );
}

export default function App() {
  const [user, setUser] = useLocalStorage("user", null);
  const [topic, setTopic] = useState(null);
  const [index, setIndex] = useState(0);
  const [answers, setAnswers] = useState({});
  const [finished, setFinished] = useState(false);
  const [suggestions, setSuggestions] = useLocalStorage("suggestions", []);

  const questions = topic ? TOPICS[topic] : [];

  function handleSelect(i) {
    setAnswers({ ...answers, [questions[index].id]: i });
  }

  function score() {
    return questions.reduce((s, q) => (answers[q.id] === q.answer ? s + 1 : s), 0);
  }

  if (!user) return <AuthModal onLogin={setUser} />;

  return (
    <div className="min-h-screen bg-gradient-to-b from-blue-50 to-white py-10 px-4">
      <div className="max-w-4xl mx-auto">
        <header className="flex justify-between items-center mb-8">
          <h1 className="text-2xl font-bold">ğŸ“˜ MÉ™ÅŸhur Test PlatformasÄ±</h1>
          <div className="flex items-center gap-3">
            <span className="text-sm text-gray-700">{user.name}</span>
            <button onClick={() => setUser(null)} className="text-red-600 text-sm">Ã‡Ä±xÄ±ÅŸ</button>
          </div>
        </header>

        {!topic ? (
          <div className="grid md:grid-cols-3 gap-4">
            {Object.keys(TOPICS).map((t) => (
              <button key={t} onClick={() => setTopic(t)} className="p-6 bg-white shadow-md rounded-2xl hover:shadow-lg">
                <h2 className="text-lg font-semibold">{t}</h2>
                <p className="text-sm text-gray-500">{TOPICS[t].length} sual</p>
              </button>
            ))}
          </div>
        ) : !finished ? (
          <div className="grid gap-6">
            <QuestionCard q={questions[index]} index={index} total={questions.length} selected={answers[questions[index].id]} onSelect={handleSelect} />
            <div className="flex justify-between">
              <button disabled={index === 0} onClick={() => setIndex(index - 1)} className="px-4 py-2 border rounded-lg">Geri</button>
              {index < questions.length - 1 ? (
                <button onClick={() => setIndex(index + 1)} className="px-4 py-2 bg-blue-600 text-white rounded-lg">NÃ¶vbÉ™ti</button>
              ) : (
                <button onClick={() => setFinished(true)} className="px-4 py-2 bg-green-600 text-white rounded-lg">Bitir</button>
              )}
            </div>
          </div>
        ) : (
          <div className="text-center bg-white p-8 rounded-2xl shadow-md">
            <h3 className="text-2xl font-bold mb-3">NÉ™ticÉ™</h3>
            <p className="text-lg">{score()} / {questions.length} dÃ¼zgÃ¼n cavab ğŸ‰</p>
            <button onClick={() => {setTopic(null); setAnswers({}); setFinished(false);}} className="mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg">Æsas sÉ™hifÉ™yÉ™ qayÄ±t</button>
          </div>
        )}

        <SuggestionForm onSubmit={(s) => setSuggestions([...suggestions, s])} />

        <footer className="text-center text-sm text-gray-500 mt-8">
          Â© 2025 MÉ™ÅŸhur Test â€” Tunar CÉ™fÉ™rli tÉ™rÉ™findÉ™n hazÄ±rlandÄ±.
        </footer>
      </div>
    </div>
  );
}

/*
----------------------------------------
ğŸ“„ DigÉ™r fayllar:
----------------------------------------

1ï¸âƒ£ public/index.html
----------------------------------------
<!DOCTYPE html>
<html lang="az">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MÉ™ÅŸhur Test</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  </head>
  <body>
    <div id="root"></div>
    <script src="/src/index.js" type="module"></script>
  </body>
</html>


2ï¸âƒ£ src/index.js
----------------------------------------
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<App />);


3ï¸âƒ£ package.json
----------------------------------------
{
  "name": "meshur-test",
  "version": "1.0.0",
  "private": true,
  "homepage": "https://YOUR_GITHUB_USERNAME.github.io/meshur-test",
  "scripts": {
    "start": "vite",
    "build": "vite build",
    "deploy": "gh-pages -d dist"
  },
  "dependencies": {
    "react": "^18.3.1",
    "react-dom": "^18.3.1"
  },
  "devDependencies": {
    "vite": "^5.2.0",
    "gh-pages": "^6.0.0"
  }
}

âœ… HazÄ±r olduqda terminalda:
1. npm install
2. npm run build
3. npm run deploy

Bu, avtomatik olaraq saytÄ±nÄ± GitHub Pages-É™ yÃ¼klÉ™yÉ™cÉ™k ğŸš€
*/
